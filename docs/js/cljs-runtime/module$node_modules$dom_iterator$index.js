shadow$provide.module$node_modules$dom_iterator$index=function(global,process,require,module,exports,shadow$shims){function Iterator(node,root){if(!(this instanceof Iterator))return new Iterator(node,root);this.node=this.start=this.peeked=node;this.root=root;this.closingTag=!1;this._revisit=!0;this._selects=[];this._rejects=[];if(node&&this.higher(node))throw Error("root must be a parent or ancestor to node");}function traverse(dir,child){var next="nextSibling"==dir;return function(expr,n,peek){expr=
this.compile(expr);n=n&&0<n?n:1;for(var node=this.node,closing=this.closingTag,revisit=this._revisit;node;){if(xor(next,closing)&&node[child])node=node[child],closing=!next;else if(1==node.nodeType&&!node[child]&&xor(next,closing)){if(closing=next,!revisit)continue}else if(node[dir])node=node[dir],closing=!next;else if(node=node.parentNode,closing=next,!revisit)continue;if(!node||this.higher(node,this.root))break;if(expr(node)&&this.selects(node,peek)&&this.rejects(node,peek)&&!--n)return peek||(this.node=
node),this.closingTag=closing,node}return null}}var xor=require("module$node_modules$component_xor$index"),props=require("module$node_modules$component_props$index");module.exports=Iterator;Iterator.prototype.reset=function(node){this.node=node||this.start;return this};Iterator.prototype.revisit=function(revisit){this._revisit=void 0==revisit?!0:revisit;return this};Iterator.prototype.opening=function(){1==this.node.nodeType&&(this.closingTag=!1);return this};Iterator.prototype.atOpening=function(){return!this.closingTag};
Iterator.prototype.closing=function(){1==this.node.nodeType&&(this.closingTag=!0);return this};Iterator.prototype.atClosing=function(){return this.closingTag};Iterator.prototype.next=traverse("nextSibling","firstChild");Iterator.prototype.previous=Iterator.prototype.prev=traverse("previousSibling","lastChild");Iterator.prototype.select=function(expr){expr=this.compile(expr);this._selects.push(expr);return this};Iterator.prototype.selects=function(node,peek){var exprs=this._selects,len=exprs.length;
if(!len)return!0;for(var i=0;i<len;i++)if(exprs[i].call(this,node,peek))return!0;return!1};Iterator.prototype.reject=function(expr){expr=this.compile(expr);this._rejects.push(expr);return this};Iterator.prototype.rejects=function(node,peek){var exprs=this._rejects,len=exprs.length;if(!len)return!0;for(var i=0;i<len;i++)if(exprs[i].call(this,node,peek))return!1;return!0};Iterator.prototype.higher=function(node){var root=this.root;if(!root)return!1;for(node=node.parentNode;node&&node!=root;)node=node.parentNode;
return node!=root};Iterator.prototype.compile=function(expr){switch(typeof expr){case "number":return function(node){return expr==node.nodeType};case "string":return new Function("node","return "+props(expr,"node."));case "function":return expr;default:return function(){return!0}}};Iterator.prototype.peak=Iterator.prototype.peek=function(expr,n){1==arguments.length&&(n=expr,expr=!0);return(n=void 0==n?1:n)?0<n?this.next(expr,n,!0):this.prev(expr,Math.abs(n),!0):this.node};Iterator.prototype.use=function(fn){fn(this);
return this}}
//# sourceMappingURL=module$node_modules$dom_iterator$index.js.map
