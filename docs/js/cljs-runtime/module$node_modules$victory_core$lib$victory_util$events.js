shadow$provide.module$node_modules$victory_core$lib$victory_util$events=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];
return arr2}return Array.from(arr)}Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$lodash$without");var _without3=_interopRequireDefault(global);global=require("module$node_modules$lodash$isFunction");var _isFunction3=_interopRequireDefault(global);global=require("module$node_modules$lodash$isEmpty");var _isEmpty3=_interopRequireDefault(global);global=require("module$node_modules$lodash$partial");var _partial3=_interopRequireDefault(global);global=require("module$node_modules$lodash$merge");
var _merge3=_interopRequireDefault(global);global=require("module$node_modules$lodash$extend");var _extend7=_interopRequireDefault(global);require=require("module$node_modules$lodash$assign");var _assign3=_interopRequireDefault(require);exports.default={getEvents:function(props,target,eventKey,getScopedEvents){var _this=this,getEventsByTarget=function(events){var selectedEvents=function(){var targetEvents=events.reduce(function(memo,event){return void 0!==event.target?""+event.target===""+target?
memo.concat(event):memo:memo.concat(event)},[]);return void 0!==eventKey&&"parent"!==target?targetEvents.filter(function(obj){obj=obj.eventKey;return Array.isArray(obj)?obj.some(function(k){return k?""+k===""+eventKey:!0}):obj?""+obj===""+eventKey:!0}):targetEvents}();return Array.isArray(selectedEvents)&&selectedEvents.reduce(function(memo,event){return event?(0,_assign3.default)(memo,event.eventHandlers):memo},{})},allEvents=function(){if(Array.isArray(_this.componentEvents)){var _componentEvents;
return Array.isArray(props.events)?(_componentEvents=_this.componentEvents).concat.apply(_componentEvents,_toConsumableArray(props.events)):_this.componentEvents}return props.events}();getScopedEvents=allEvents&&(0,_isFunction3.default)(getScopedEvents)?getScopedEvents(getEventsByTarget(allEvents),target):void 0;if(!props.sharedEvents)return getScopedEvents;allEvents=props.sharedEvents.getEvents;getEventsByTarget=props.sharedEvents.events&&allEvents(getEventsByTarget(props.sharedEvents.events),target);
return(0,_assign3.default)({},getEventsByTarget,getScopedEvents)},getScopedEvents:function(events,namespace,childType,baseProps){var _this2=this;if((0,_isEmpty3.default)(events))return{};baseProps=baseProps||this.baseProps;var getTargetProps=function(identifier,type){var childName=identifier.childName,target=identifier.target;identifier=identifier.key;type="props"===type?baseProps:_this2.state;childName=void 0!==childName&&null!==childName&&type[childName]?type[childName]:type;return"parent"===identifier?
childName.parent:childName[identifier]&&childName[identifier][target]},parseEvent=function(eventReturn,eventKey){var childNames="parent"===namespace?eventReturn.childName:eventReturn.childName||childType,target=eventReturn.target||namespace,getKeys=function(childName){return"all"===eventReturn.eventKey?baseProps[childName]?(0,_without3.default)(Object.keys(baseProps[childName]),"parent"):(0,_without3.default)(Object.keys(baseProps),"parent"):void 0===eventReturn.eventKey&&"parent"===eventKey?baseProps[childName]?
Object.keys(baseProps[childName]):Object.keys(baseProps):void 0!==eventReturn.eventKey?eventReturn.eventKey:eventKey},getMutationObject=function(key,childName){var nullFunction=function(){return null},mutationTargetProps=getTargetProps({childName:childName,key:key,target:target},"props"),mutationTargetState=getTargetProps({childName:childName,key:key,target:target},"state"),mutatedProps=(eventReturn.mutation||nullFunction)((0,_assign3.default)({},mutationTargetProps,mutationTargetState),baseProps);
nullFunction=_this2.state[childName]||{};mutationTargetProps=function(state){return"parent"===target?(0,_extend7.default)(state[key],mutatedProps):(0,_extend7.default)(state[key],_defineProperty({},target,mutatedProps))};return void 0!==childName&&null!==childName?(0,_extend7.default)(_this2.state,_defineProperty({},childName,(0,_extend7.default)(nullFunction,_defineProperty({},key,mutationTargetProps(nullFunction))))):(0,_extend7.default)(_this2.state,_defineProperty({},key,mutationTargetProps(_this2.state)))},
getReturnByChild=function(childName){var mutationKeys=getKeys(childName);return Array.isArray(mutationKeys)?mutationKeys.reduce(function(memo,key){return(0,_assign3.default)(memo,getMutationObject(key,childName))},{}):getMutationObject(mutationKeys,childName)};childNames="all"===childNames?(0,_without3.default)(Object.keys(baseProps),"parent"):childNames;return Array.isArray(childNames)?childNames.reduce(function(memo,childName){return(0,_assign3.default)(memo,getReturnByChild(childName))},{}):getReturnByChild(childNames)},
parseEventReturn=function(eventReturn,eventKey){return Array.isArray(eventReturn)?eventReturn.reduce(function(memo,props){return memo=(0,_merge3.default)({},memo,parseEvent(props,eventKey))},{}):parseEvent(eventReturn,eventKey)},compileCallbacks=function(eventReturn){var getCallback=function(obj){return(0,_isFunction3.default)(obj.callback)&&obj.callback},callbackArray=(Array.isArray(eventReturn)?eventReturn.map(function(evtObj){return getCallback(evtObj)}):[getCallback(eventReturn)]).filter(function(callback){return!1!==
callback});return callbackArray.length?function(){return callbackArray.forEach(function(callback){return callback()})}:void 0},onEvent=function(evt,childProps,eventKey,eventName){if(evt=events[eventName](evt,childProps,eventKey,_this2))childProps=compileCallbacks(evt),_this2.setState(parseEventReturn(evt,eventKey),childProps)};return Object.keys(events).reduce(function(memo,event){memo[event]=onEvent;return memo},{})},getPartialEvents:function(events,eventKey,childProps){return events?Object.keys(events).reduce(function(memo,
eventName){memo[eventName]=(0,_partial3.default)(events[eventName],_partial3.default.placeholder,childProps,eventKey,eventName);return memo},{}):{}},getEventState:function(eventKey,namespace,childType){return childType?this.state[childType]&&this.state[childType][eventKey]&&this.state[childType][eventKey][namespace]:"parent"===eventKey?this.state[eventKey]&&this.state[eventKey][namespace]||this.state[eventKey]:this.state[eventKey]&&this.state[eventKey][namespace]},getComponentEvents:function(props,
components){return(components=Array.isArray(components)&&components.reduce(function(memo,componentName){var _memo;componentName=(componentName=props[componentName])&&componentName.type&&componentName.type.defaultEvents;return memo=Array.isArray(componentName)?(_memo=memo).concat.apply(_memo,_toConsumableArray(componentName)):memo},[]))&&components.length?components:void 0}}}
//# sourceMappingURL=module$node_modules$victory_core$lib$victory_util$events.js.map
