shadow$provide.module$node_modules$history$createHashHistory=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i],key;for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};global=require("module$node_modules$warning$browser");var _warning2=
_interopRequireDefault(global);global=require("module$node_modules$invariant$browser");var _invariant2=_interopRequireDefault(global),_LocationUtils=require("module$node_modules$history$LocationUtils"),_PathUtils=require("module$node_modules$history$PathUtils");global=require("module$node_modules$history$createTransitionManager");var _createTransitionManager2=_interopRequireDefault(global),_DOMUtils=require("module$node_modules$history$DOMUtils"),HashPathCoders={hashbang:{encodePath:function(path){return"!"===
path.charAt(0)?path:"!/"+(0,_PathUtils.stripLeadingSlash)(path)},decodePath:function(path){return"!"===path.charAt(0)?path.substr(1):path}},noslash:{encodePath:_PathUtils.stripLeadingSlash,decodePath:_PathUtils.addLeadingSlash},slash:{encodePath:_PathUtils.addLeadingSlash,decodePath:_PathUtils.addLeadingSlash}},getHashPath=function(){var href=window.location.href,hashIndex=href.indexOf("#");return-1===hashIndex?"":href.substring(hashIndex+1)},replaceHashPath=function(path){var hashIndex=window.location.href.indexOf("#");
window.location.replace(window.location.href.slice(0,0<=hashIndex?hashIndex:0)+"#"+path)};exports.default=function(){var props=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,_invariant2.default)(_DOMUtils.canUseDOM,"Hash history needs a DOM");var globalHistory=window.history,canGoWithoutReload=(0,_DOMUtils.supportsGoWithoutReloadUsingHash)(),_props$getUserConfirm=props.getUserConfirmation,getUserConfirmation=void 0===_props$getUserConfirm?_DOMUtils.getConfirmation:_props$getUserConfirm;
_props$getUserConfirm=props.hashType;_props$getUserConfirm=void 0===_props$getUserConfirm?"slash":_props$getUserConfirm;var basename=props.basename?(0,_PathUtils.stripTrailingSlash)((0,_PathUtils.addLeadingSlash)(props.basename)):"";props=HashPathCoders[_props$getUserConfirm];var encodePath=props.encodePath,decodePath=props.decodePath,getDOMLocation=function(){var path=decodePath(getHashPath());(0,_warning2.default)(!basename||(0,_PathUtils.hasBasename)(path,basename),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+
path+'" to begin with "'+basename+'".');basename&&(path=(0,_PathUtils.stripBasename)(path,basename));return(0,_LocationUtils.createLocation)(path)},transitionManager=(0,_createTransitionManager2.default)(),setState=function(nextState){_extends(history,nextState);history.length=globalHistory.length;transitionManager.notifyListeners(history.location,history.action)},forceNextPop=!1,ignorePath=null,handleHashChange=function(){var path=getHashPath(),encodedPath=encodePath(path);path!==encodedPath?replaceHashPath(encodedPath):
(path=getDOMLocation(),encodedPath=history.location,!forceNextPop&&(0,_LocationUtils.locationsAreEqual)(encodedPath,path)||ignorePath===(0,_PathUtils.createPath)(path)||(ignorePath=null,handlePop(path)))},handlePop=function(location){forceNextPop?(forceNextPop=!1,setState()):transitionManager.confirmTransitionTo(location,"POP",getUserConfirmation,function(ok){if(ok)setState({action:"POP",location:location});else{ok=history.location;ok=allPaths.lastIndexOf((0,_PathUtils.createPath)(ok));-1===ok&&(ok=
0);var fromIndex=allPaths.lastIndexOf((0,_PathUtils.createPath)(location));-1===fromIndex&&(fromIndex=0);if(ok-=fromIndex)forceNextPop=!0,go(ok)}})};props=getHashPath();_props$getUserConfirm=encodePath(props);props!==_props$getUserConfirm&&replaceHashPath(_props$getUserConfirm);props=getDOMLocation();var allPaths=[(0,_PathUtils.createPath)(props)],go=function(n){(0,_warning2.default)(canGoWithoutReload,"Hash history go(n) causes a full page reload in this browser");globalHistory.go(n)},listenerCount=
0,checkDOMListeners=function(delta){listenerCount+=delta;1===listenerCount?(0,_DOMUtils.addEventListener)(window,"hashchange",handleHashChange):0===listenerCount&&(0,_DOMUtils.removeEventListener)(window,"hashchange",handleHashChange)},isBlocked=!1,history={length:globalHistory.length,action:"POP",location:props,createHref:function(location){return"#"+encodePath(basename+(0,_PathUtils.createPath)(location))},push:function(path,state){(0,_warning2.default)(void 0===state,"Hash history cannot push state; it is ignored");
var location=(0,_LocationUtils.createLocation)(path,void 0,void 0,history.location);transitionManager.confirmTransitionTo(location,"PUSH",getUserConfirmation,function(ok){if(ok){ok=(0,_PathUtils.createPath)(location);var encodedPath=encodePath(basename+ok);getHashPath()!==encodedPath?(ignorePath=ok,window.location.hash=encodedPath,encodedPath=allPaths.lastIndexOf((0,_PathUtils.createPath)(history.location)),encodedPath=allPaths.slice(0,-1===encodedPath?0:encodedPath+1),encodedPath.push(ok),allPaths=
encodedPath,setState({action:"PUSH",location:location})):((0,_warning2.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),setState())}})},replace:function(path,state){(0,_warning2.default)(void 0===state,"Hash history cannot replace state; it is ignored");var location=(0,_LocationUtils.createLocation)(path,void 0,void 0,history.location);transitionManager.confirmTransitionTo(location,"REPLACE",getUserConfirmation,function(ok){if(ok){ok=(0,_PathUtils.createPath)(location);
var encodedPath=encodePath(basename+ok);getHashPath()!==encodedPath&&(ignorePath=ok,replaceHashPath(encodedPath));encodedPath=allPaths.indexOf((0,_PathUtils.createPath)(history.location));-1!==encodedPath&&(allPaths[encodedPath]=ok);setState({action:"REPLACE",location:location})}})},go:go,goBack:function(){return go(-1)},goForward:function(){return go(1)},block:function(){var unblock=transitionManager.setPrompt(0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1);isBlocked||(checkDOMListeners(1),
isBlocked=!0);return function(){isBlocked&&(isBlocked=!1,checkDOMListeners(-1));return unblock()}},listen:function(listener){var unlisten=transitionManager.appendListener(listener);checkDOMListeners(1);return function(){checkDOMListeners(-1);unlisten()}}};return history}}
//# sourceMappingURL=module$node_modules$history$createHashHistory.js.map
