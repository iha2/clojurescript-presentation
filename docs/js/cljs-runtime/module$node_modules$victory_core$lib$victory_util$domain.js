shadow$provide.module$node_modules$victory_core$lib$victory_util$domain=function(global,process,require,module,exports,shadow$shims){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$lodash$isPlainObject");var _isPlainObject3=
_interopRequireDefault(global);global=require("module$node_modules$lodash$includes");var _includes3=_interopRequireDefault(global);global=require("module$node_modules$lodash$flatten");var _flatten3=_interopRequireDefault(global);global=require("module$node_modules$victory_core$lib$victory_util$data");var _data2=_interopRequireDefault(global);global=require("module$node_modules$victory_core$lib$victory_util$scale");var _scale2=_interopRequireDefault(global);global=require("module$node_modules$victory_core$lib$victory_util$helpers");
var _helpers2=_interopRequireDefault(global);require=require("module$node_modules$victory_core$lib$victory_util$collection");var _collection2=_interopRequireDefault(require);exports.default={getDomain:function(props,axis){var propsDomain=this.getDomainFromProps(props,axis);if(propsDomain||(propsDomain=this.getDomainFromCategories(props,axis)))return this.padDomain(propsDomain,props,axis);propsDomain=_data2.default.getData(props);propsDomain=this.getDomainFromData(props,axis,propsDomain);return this.cleanDomain(this.padDomain(propsDomain,
props,axis),props,axis)},cleanDomain:function(domain,props,axis){if("log"!==_scale2.default.getScaleType(props,axis))return domain;props=0>domain[0]||0>domain[1]?-1/Number.MAX_SAFE_INTEGER:1/Number.MAX_SAFE_INTEGER;return[0===domain[0]?props:domain[0],0===domain[1]?props:domain[1]]},getDomainWithZero:function(props,axis){var _this=this,propsDomain=this.getDomainFromProps(props,axis);if(propsDomain)return this.cleanDomain(this.padDomain(propsDomain,props,axis),props,axis);var horizontal=props.horizontal;
propsDomain=function(domain){var isDependent="y"===axis&&!horizontal||"x"===axis&&horizontal,min=_collection2.default.getMinValue(domain,0),max=_collection2.default.getMaxValue(domain,0);return _this.padDomain(isDependent?[min,max]:domain,props,axis)};var categoryDomain=this.getDomainFromCategories(props,axis);if(categoryDomain)return this.cleanDomain(this.padDomain(propsDomain(categoryDomain),props,axis),props,axis);categoryDomain=_data2.default.getData(props);propsDomain=propsDomain(this.getDomainFromData(props,
axis,categoryDomain));return this.cleanDomain(this.padDomain(propsDomain,props,axis),props,axis)},getDomainFromProps:function(props,axis){if(props.domain&&props.domain[axis])return props.domain[axis];if(props.domain&&Array.isArray(props.domain))return props.domain},getDomainFromData:function(props,axis,dataset){var currentAxis=_helpers2.default.getCurrentAxis(axis,props.horizontal);dataset=(0,_flatten3.default)(dataset).map(function(datum){return datum["_"+currentAxis]});if(1>dataset.length)return _scale2.default.getBaseScale(props,
axis).domain();props=_collection2.default.getMinValue(dataset);axis=_collection2.default.getMaxValue(dataset);return props===axis?[0,0===axis?1:axis]:[props,axis]},getDomainFromTickValues:function(props){var domain=void 0;_helpers2.default.stringTicks(props)?domain=[1,props.tickValues.length]:(domain=props.tickValues.map(function(value){return+value}),domain=[_collection2.default.getMinValue(domain),_collection2.default.getMaxValue(domain)]);_helpers2.default.isVertical(props)&&domain.reverse();return domain},
getDomainFromCategories:function(props,axis){var categories=_data2.default.getCategories(props,axis);if(categories){props=_collection2.default.containsStrings(categories)?_data2.default.getStringsFromCategories(props,axis):[];var stringMap=0===props.length?null:props.reduce(function(memo,string,index){memo[string]=index+1;return memo},{});categories=stringMap?categories.map(function(value){return stringMap[value]}):categories;return[_collection2.default.getMinValue(categories),_collection2.default.getMaxValue(categories)]}},
getDomainFromGroupedData:function(props,axis,datasets){var horizontal=props.horizontal,dependent="x"===axis&&!horizontal||"y"===axis&&horizontal;if(dependent&&props.categories)return this.getDomainFromCategories(props,axis);horizontal=this.getDomainFromData(props,axis,datasets);axis=dependent?[]:this.getCumulativeData(props,axis,datasets);props=axis.map(function(dataset){return dataset.reduce(function(memo,val){return 0<val?+val+ +memo:memo},0)});axis=axis.map(function(dataset){return dataset.reduce(function(memo,
val){return 0>val?+val+ +memo:memo},0)});axis=Math.min.apply(Math,_toConsumableArray(axis));axis=0>axis?axis:_collection2.default.getMinValue(horizontal);horizontal=_collection2.default.getMaxValue.apply(_collection2.default,[horizontal].concat(_toConsumableArray(props)));return axis===horizontal?[0,0===horizontal?1:horizontal]:[axis,horizontal]},getCumulativeData:function(props,axis,datasets){var currentAxis=_helpers2.default.getCurrentAxis(axis,props.horizontal),categories=[],axisValues=[];datasets.forEach(function(dataset){dataset.forEach(function(data){void 0===
data.category||(0,_includes3.default)(categories,data.category)?(0,_includes3.default)(axisValues,data[currentAxis])||axisValues.push(data[currentAxis]):categories.push(data.category)})});props=function(){return categories.map(function(value){return datasets.reduce(function(prev,data){return data.category===value?prev.concat(data[axis]):prev},[])})};var _dataByIndex=function(){return axisValues.map(function(value,index){return datasets.map(function(data){return data[index]&&data[index]["_"+currentAxis]})})};
return 0===categories.length?_dataByIndex():props()},getDomainPadding:function(props,axis){var formatPadding=function(padding){return Array.isArray(padding)?{left:padding[0],right:padding[1]}:{left:padding,right:padding}};return(0,_isPlainObject3.default)(props.domainPadding)?formatPadding(props.domainPadding[axis]):formatPadding(props.domainPadding)},padDomain:function(domain,props,axis){if(!props.domainPadding)return domain;var padding=this.getDomainPadding(props,axis);if(!padding.left&&!padding.right)return domain;
var domainMin=_collection2.default.getMinValue(domain);domain=_collection2.default.getMaxValue(domain);props=_helpers2.default.getRange(props,axis);props=Math.abs(Math.max.apply(Math,_toConsumableArray(props))-Math.min.apply(Math,_toConsumableArray(props)));axis=Math.abs(domain-domainMin)*padding.left/props;var JSCompiler_object_inline_right_1992=Math.abs(domain-domainMin)*padding.right/props;axis=0<=domainMin&&0>=domainMin-axis?0:domainMin.valueOf()-axis;var JSCompiler_object_inline_max_1994=0>=
domain&&0<=domain+JSCompiler_object_inline_right_1992?0:domain.valueOf()+JSCompiler_object_inline_right_1992;JSCompiler_object_inline_right_1992=Math.abs(JSCompiler_object_inline_max_1994-axis)*padding.left/props;padding=Math.abs(JSCompiler_object_inline_max_1994-axis)*padding.right/props;props=0<=domainMin&&0>=domainMin-JSCompiler_object_inline_right_1992?0:domainMin.valueOf()-JSCompiler_object_inline_right_1992;padding=0<=domain&&0>=domain+padding?0:domain.valueOf()+padding;return domainMin instanceof
Date||domain instanceof Date?[new Date(props),new Date(padding)]:[props,padding]},orientDomain:function(domain,orientations,axis){var otherAxis="x"===axis?"y":"x",flippedAxis="left"===orientations.x||"right"===orientations.x;orientations=flippedAxis?orientations[otherAxis]===("x"===axis?"bottom":"left"):orientations[otherAxis]===("x"===otherAxis?"bottom":"left");return flippedAxis?orientations?domain.concat().reverse():domain:orientations?domain:domain.concat().reverse()}}}
//# sourceMappingURL=module$node_modules$victory_core$lib$victory_util$domain.js.map
